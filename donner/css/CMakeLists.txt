# Generated by tools/cmake/gen_cmakelists.py.
add_library(donner_css_core
  Color.cc
  ComponentValue.cc
  Declaration.cc
  Rule.cc
  Selector.cc
  selectors/ComplexSelector.cc
  selectors/PseudoClassSelector.cc
  Color.h
  ComponentValue.h
  Declaration.h
  Rule.h
  Selector.h
  Specificity.h
  Stylesheet.h
  Token.h
  WqName.h
  details/AnbValue.h
  selectors/AttributeSelector.h
  selectors/ClassSelector.h
  selectors/ComplexSelector.h
  selectors/CompoundSelector.h
  selectors/IdSelector.h
  selectors/PseudoClassSelector.h
  selectors/PseudoElementSelector.h
  selectors/SelectorMatchOptions.h
  selectors/TypeSelector.h
)
target_include_directories(donner_css_core PUBLIC ${PROJECT_SOURCE_DIR})
set_target_properties(donner_css_core PROPERTIES CXX_STANDARD 20 CXX_STANDARD_REQUIRED YES)
target_link_libraries(donner_css_core PUBLIC donner_base donner_base_element donner_base_xml_qualified_name frozen)
add_library(donner_css_parser
  parser/AnbMicrosyntaxParser.cc
  parser/ColorParser.cc
  parser/DeclarationListParser.cc
  parser/RuleParser.cc
  parser/SelectorParser.cc
  parser/StylesheetParser.cc
  parser/ValueParser.cc
  parser/details/Tokenizer.cc
  parser/AnbMicrosyntaxParser.h
  parser/ColorParser.h
  parser/DeclarationListParser.h
  parser/RuleParser.h
  parser/SelectorParser.h
  parser/StylesheetParser.h
  parser/ValueParser.h
  parser/details/Common.h
  parser/details/ComponentValueParser.h
  parser/details/Subparsers.h
  parser/details/Tokenizer.h
)
target_include_directories(donner_css_parser PUBLIC ${PROJECT_SOURCE_DIR})
set_target_properties(donner_css_parser PROPERTIES CXX_STANDARD 20 CXX_STANDARD_REQUIRED YES)
target_link_libraries(donner_css_parser PUBLIC donner_css_core donner_base donner_base_parser)
add_library(donner_css
  CSS.cc
  CSS.h
)
target_include_directories(donner_css PUBLIC ${PROJECT_SOURCE_DIR})
set_target_properties(donner_css PROPERTIES CXX_STANDARD 20 CXX_STANDARD_REQUIRED YES)
target_link_libraries(donner_css PUBLIC donner_css_core donner_css_parser)

add_library(donner_css_selector_test_utils STATIC
  tests/SelectorTestUtils.h
)
target_include_directories(donner_css_selector_test_utils PUBLIC ${PROJECT_SOURCE_DIR})
target_link_libraries(donner_css_selector_test_utils PUBLIC gtest)

add_executable(css_tests
  tests/Color_tests.cc
  tests/Selector_tests.cc
  tests/Specificity_tests.cc
)
target_link_libraries(css_tests PRIVATE donner_css_parser donner_css_core donner_css_selector_test_utils donner_base gtest_main donner_base_test_utils donner_base_element_fake)
add_test(NAME css_tests COMMAND css_tests)
set_tests_properties(css_tests PROPERTIES ENVIRONMENT "RUNFILES_DIR=${PROJECT_SOURCE_DIR}")

add_executable(css_parser_tests
  parser/tests/AnbMicrosyntaxParser_tests.cc
  parser/tests/ColorParser_tests.cc
  parser/tests/DeclarationListParser_tests.cc
  parser/tests/RuleParser_tests.cc
  parser/tests/SelectorParser_tests.cc
  parser/tests/StylesheetParser_tests.cc
  parser/tests/TokenTestUtils.h
  parser/tests/Tokenizer_tests.cc
  parser/tests/ValueParser_tests.cc
)
target_link_libraries(css_parser_tests PRIVATE donner_css_parser donner_css_selector_test_utils donner_base gtest_main donner_base_test_utils)
add_test(NAME css_parser_tests COMMAND css_parser_tests)
set_tests_properties(css_parser_tests PROPERTIES ENVIRONMENT "RUNFILES_DIR=${PROJECT_SOURCE_DIR}")

add_executable(css_parsing_tests
  parser/tests/css_parsing_tests.cc
)
target_link_libraries(css_parsing_tests PRIVATE donner_css_parser donner_base gtest_main donner_base_test_utils nlohmann_json::nlohmann_json)
add_test(NAME css_parsing_tests COMMAND css_parsing_tests)
set_tests_properties(css_parsing_tests PROPERTIES ENVIRONMENT "RUNFILES_DIR=${CMAKE_CURRENT_BINARY_DIR}")
file(COPY
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/component_value_list.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/declaration_list.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/one_component_value.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/one_declaration.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/one_rule.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/rule_list.json
  ${PROJECT_SOURCE_DIR}/third_party/css-parsing-tests/stylesheet.json
DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/css-parsing-tests)
